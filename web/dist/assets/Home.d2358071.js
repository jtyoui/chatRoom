import{k as e,a as A,u as t,b as a,r as s,o as l,d as n,e as r,w as o,l as B,t as i,F as Q,m as c,n as E,p as U}from"./vendor.3f19631e.js";var u={name:"Home",setup(){const s=e([{left:[{user:"",content:"",time:""}],right:"",time:""}]);let l=A("");const n=t(),r=A(""),o=new WebSocket("ws://localhost:11280/ws");let B={type:"",content:""};const i=A(0),Q=A([]);a((()=>{const e=localStorage.getItem("username"),A=localStorage.getItem("chat");e&&e.trim().length?l.value=e:n.push("/login"),A&&JSON.parse(A).forEach((e=>{s.push(e)}))})),setInterval((()=>{const e=document.getElementById("scrollText");e&&(e.scrollTop=e.scrollHeight)}),100),o.onmessage=function(e){const A=JSON.parse(e.data);switch(A.type){case"handshake":B.type="login",B.content=l.value,o.send(JSON.stringify(B));break;case"user":A.user===l.value?s.push({left:[],right:A.content,time:A.time}):s[s.length-1].left.push({user:A.user,content:A.content,time:A.time}),localStorage.setItem("chat",JSON.stringify(s))}A.user_list&&(Q.value=A.user_list,i.value=Q.value.length)};return o.onerror=function(e){alert("聊天异常，请刷新浏览器！")},{handleSendClick:()=>{r.value.trim().length&&(B.type="user",B.content=r.value,o.send(JSON.stringify(B))),r.value=""},send:r,data:s,username:l,number:i,userList:Q,userCopyChat:e=>{r.value="",r.value=e+"@"}}}};const d={class:"box"},g={class:"infinite-list-wrapper",style:{overflow:"auto","border-top":"1px solid #0072C1"}},p={style:{"list-style-type":"none"}},h=["onClick"],m=B("span",{style:{"margin-left":"400px","font-size":"16px",color:"rgba(51,33,210,0.42)"}},"欢迎进入聊天室",-1),F={style:{float:"right","font-size":"14px"}},f={class:"chat"},k={key:0,class:"right cams"},v=B("img",{class:"headIcon radius",src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAiACIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDh/wBsr9qXxD8SviRrOjy6g0PhnS7tra10u3ciLKtt3yD+OTIOSeB0HqfKPBertq99b20MbT3MrqkcUYyzsSAAB65I/Our1D9kvU/EH7Snib4XX+ujT9VsbT7et5MAft02yF2C5I+8ZWf6Ka9j/YV/ZX1nVL/xBr2ui80O9t7e5s9KuIwu62vVWP8AeEMCDtMi490b0rx6teEZOLfvf5nr042jzLY6X4G/E7WfhD4ul0aW/NhNDc+ReW4O+EkE5BXIBIHAPH1r9KLKZ7i1ikk8vcyhsxHKnI6g+lfnR8Vf2bde8MePvE2qNNJf6Rq02n2AvJWAm+0XEkAaQBQAcOpzgDhs9q/QbwbaXen+EdEtb/8A4/4LGCK4wc/vFjUNz9Qa7sNUdSmr7nLiuXmvE2KKKK6jiPjv9vTwl8HJLG11zxd4wg8CeOrWOS50jUrUk3jS4QIxRfmZP3QXnjBYZr3DTfFtp4V8Fafr+rJBY6VNbQ3Vzd8RrC0gUsX9iW61/Pp8SPjV4k+LXxMvPG3ii5/tXUri6+0CG4JeGNPMLiFVJ4jGcbfSv1e/Z/8A24vAn7Y3w91r4deMdHj0fxLNpkhm0vfi1v4403s1uxOQy7d3lnkBcgnBx4eYUXKUaiWi3O2jJW5WfbS3Gna8tvKGtr61VVu7d1ZZUk6hWUjIOOcEeoro4JhPCrjowzX5L/8ABLP416jqniTX/BN3rV1c3At4bjRrK6mLRIitIs6Lk/LkyxNgdQp9K/WLT42jt8OcvxkjoTgVthaklWnQtov1Jq01GKlfctUUUV6xyH8sNbngfULrS/GOi3VnczWlzHeRFJoHKOvzAcEcjg0UVnU+CXoXD4kbnwZ8Qap4Z+Jnh3UNH1K80m/jvYlS6sZ3hlUM4VgGUggEEg88gmv6M/hPfXGoeE/OuriW5l+1TDzJnLtgNwMmiisl/F+RcvhOzooorpMT/9k=",alt:""},null,-1),D={class:"name"},w={class:"title"},x={class:"content"},R={key:0,class:"left cams"},C=B("img",{class:"headIcon radius",src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAiACIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwCvIxWNmHYZr4dX9rX4jSDKzWLD2sgf619xTf6l/wDdNav7I2l2Xwt/ZC8HeLPDXh/7frviLVrW11WOEyM0kb3M0RuSBnaI0A6AD1r9a46zLH4CWEp5e3z1HJW5lBOyT1k9NFex+TcB5ThM0liVi4pqPLq481rtrRfcfBLftafEZVy0tio9TZD/ABr6a+BfxCv/AB34B03U9aeI39w0oLxJsU7ZWUDHbgCvtbULW3+JXizxV8PfEmh+d4Tbw7HfG7kLpHdytPsa23DAyAA3ytn2r4D+CNvHZ/D23t4V2QxXl5Gi5zhRcyAD8q+a4L4gzPMMZy41uzpqaXOppqTVnps99Gro+j404ewGW4OLw0Unz8rajyvRP71se4UVyy6pdKoAmOAMdBRX7d9bh2Z+J/VJ90dPIu6Nl7kEV84eGf2svix+ztoH/CvNMi8LXlj4ZkW1Es9vK8rCVjIGOJVJGZMZC8cCvpCvm79qT4XadaaJd+KtLspzrd3ewCd45JHDYBAPl5K4G0dv518dxfkuHzbDU6uJpKpGk7tO/wALWtrNe9ta7t30PteC85nleNlSjJx9qktO99L+W9zWm/4KN/GSL7WfsXg/bbQiZ2azmQEE4CjM4y3sOTg1v/DLQrrw74NtLS9lhmuXeW5drcEJ+9kaTAzzxvxXzx8D/AUPjnxHqkHiixuJ7ZbNWTPm26lg4wDjbnqa+rYYVt4UiQYRFCqPYCvEyTJcrwOMxGMymgqVGTtBXfNy3+1rJX7We3mfT8WZzWxkaeDqzcnHV7Wu1pbr6klFFFfbH5wdnUN4oa1lBGRtPWiivoJ/Cz5+HxI5EUtFFfPn0AUUUUAf/9k=",alt:""},null,-1),I={class:"name"},K={class:"title"},W={class:"content"};u.render=function(e,A,t,a,u,y){const M=s("el-aside"),J=s("el-header"),L=s("el-main"),V=s("el-input"),b=s("el-container");return l(),n("div",d,[r(b,{style:{height:"800px",border:"1px solid #eee"}},{default:o((()=>[r(M,{width:"200px",style:{"background-color":"rgb(238, 241, 246)"}},{default:o((()=>[B("h1",null,"在线人数："+i(a.number),1),B("div",g,[(l(!0),n(Q,null,c(a.userList,(e=>(l(),n("div",p,[B("span",{onClick:A=>a.userCopyChat(e),style:{cursor:"pointer","font-size":"16px",margin:"auto"}},i(e),9,h)])))),256))])])),_:1}),r(b,null,{default:o((()=>[r(J,null,{default:o((()=>[m,B("span",F,"当前用户："+i(a.username),1)])),_:1}),r(L,{id:"scrollText"},{default:o((()=>[(l(!0),n(Q,null,c(a.data,(e=>(l(),n("div",f,[e.right?(l(),n("div",k,[v,B("span",D,[B("p",w,i(e.time),1)]),B("span",x,i(e.right),1)])):E("",!0),(l(!0),n(Q,null,c(e.left,(e=>(l(),n("div",null,[e.content?(l(),n("div",R,[C,B("span",I,[B("p",K,i(e.user)+"-"+i(e.time),1)]),B("span",W,i(e.content),1)])):E("",!0)])))),256))])))),256))])),_:1}),r(V,{type:"textarea",rows:2,placeholder:"请输入内容",modelValue:a.send,"onUpdate:modelValue":A[0]||(A[0]=e=>a.send=e),onKeydown:U(a.handleSendClick,["enter"])},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])};export{u as default};
