import{r as k,a as p,u as w,o as v,_ as x,b as Q,c as o,d as a,e as c,w as E,f as n,t as r,F as m,g,h as R,i as D}from"./index-4dc777fd.js";const C={name:"Home",setup(){const f="ws://47.93.250.79:11280/ws",A=k([{left:[{user:"",content:"",time:""}],right:"",time:""}]);let B=p("");const s=w(),i=p(""),u=new WebSocket(f);let l={type:"",content:""};const U=p(0),d=p([]);v(()=>{const e=localStorage.getItem("username"),t=localStorage.getItem("chat");e&&e.trim().length?B.value=e:s.push("/login"),t&&JSON.parse(t).forEach(_=>{A.push(_)})}),setInterval(()=>{const e=document.getElementById("scrollText");e&&(e.scrollTop=e.scrollHeight)},100),u.onmessage=function(e){const t=JSON.parse(e.data);switch(t.type){case"handshake":l.type="login",l.content=B.value,u.send(JSON.stringify(l));break;case"user":t.user===B.value?A.push({left:[],right:t.content,time:t.time}):A[A.length-1].left.push({user:t.user,content:t.content,time:t.time}),localStorage.setItem("chat",JSON.stringify(A));break}t.user_list&&(d.value=t.user_list,U.value=d.value.length)};const F=()=>{i.value.trim().length&&(l.type="user",l.content=i.value,u.send(JSON.stringify(l))),i.value=""},h=e=>{i.value="",i.value=e+"@"};return u.onerror=function(e){alert("聊天异常，请刷新浏览器！")},{handleSendClick:F,send:i,data:A,username:B,number:U,userList:d,userCopyChat:h}}},I="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAiACIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDh/wBsr9qXxD8SviRrOjy6g0PhnS7tra10u3ciLKtt3yD+OTIOSeB0HqfKPBertq99b20MbT3MrqkcUYyzsSAAB65I/Our1D9kvU/EH7Snib4XX+ujT9VsbT7et5MAft02yF2C5I+8ZWf6Ka9j/YV/ZX1nVL/xBr2ui80O9t7e5s9KuIwu62vVWP8AeEMCDtMi490b0rx6teEZOLfvf5nr042jzLY6X4G/E7WfhD4ul0aW/NhNDc+ReW4O+EkE5BXIBIHAPH1r9KLKZ7i1ikk8vcyhsxHKnI6g+lfnR8Vf2bde8MePvE2qNNJf6Rq02n2AvJWAm+0XEkAaQBQAcOpzgDhs9q/QbwbaXen+EdEtb/8A4/4LGCK4wc/vFjUNz9Qa7sNUdSmr7nLiuXmvE2KKKK6jiPjv9vTwl8HJLG11zxd4wg8CeOrWOS50jUrUk3jS4QIxRfmZP3QXnjBYZr3DTfFtp4V8Fafr+rJBY6VNbQ3Vzd8RrC0gUsX9iW61/Pp8SPjV4k+LXxMvPG3ii5/tXUri6+0CG4JeGNPMLiFVJ4jGcbfSv1e/Z/8A24vAn7Y3w91r4deMdHj0fxLNpkhm0vfi1v4403s1uxOQy7d3lnkBcgnBx4eYUXKUaiWi3O2jJW5WfbS3Gna8tvKGtr61VVu7d1ZZUk6hWUjIOOcEeoro4JhPCrjowzX5L/8ABLP416jqniTX/BN3rV1c3At4bjRrK6mLRIitIs6Lk/LkyxNgdQp9K/WLT42jt8OcvxkjoTgVthaklWnQtov1Jq01GKlfctUUUV6xyH8sNbngfULrS/GOi3VnczWlzHeRFJoHKOvzAcEcjg0UVnU+CXoXD4kbnwZ8Qap4Z+Jnh3UNH1K80m/jvYlS6sZ3hlUM4VgGUggEEg88gmv6M/hPfXGoeE/OuriW5l+1TDzJnLtgNwMmiisl/F+RcvhOzooorpMT/9k=",V="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAiACIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwCvIxWNmHYZr4dX9rX4jSDKzWLD2sgf619xTf6l/wDdNav7I2l2Xwt/ZC8HeLPDXh/7frviLVrW11WOEyM0kb3M0RuSBnaI0A6AD1r9a46zLH4CWEp5e3z1HJW5lBOyT1k9NFex+TcB5ThM0liVi4pqPLq481rtrRfcfBLftafEZVy0tio9TZD/ABr6a+BfxCv/AB34B03U9aeI39w0oLxJsU7ZWUDHbgCvtbULW3+JXizxV8PfEmh+d4Tbw7HfG7kLpHdytPsa23DAyAA3ytn2r4D+CNvHZ/D23t4V2QxXl5Gi5zhRcyAD8q+a4L4gzPMMZy41uzpqaXOppqTVnps99Gro+j404ewGW4OLw0Unz8rajyvRP71se4UVyy6pdKoAmOAMdBRX7d9bh2Z+J/VJ90dPIu6Nl7kEV84eGf2svix+ztoH/CvNMi8LXlj4ZkW1Es9vK8rCVjIGOJVJGZMZC8cCvpCvm79qT4XadaaJd+KtLspzrd3ewCd45JHDYBAPl5K4G0dv518dxfkuHzbDU6uJpKpGk7tO/wALWtrNe9ta7t30PteC85nleNlSjJx9qktO99L+W9zWm/4KN/GSL7WfsXg/bbQiZ2azmQEE4CjM4y3sOTg1v/DLQrrw74NtLS9lhmuXeW5drcEJ+9kaTAzzxvxXzx8D/AUPjnxHqkHiixuJ7ZbNWTPm26lg4wDjbnqa+rYYVt4UiQYRFCqPYCvEyTJcrwOMxGMymgqVGTtBXfNy3+1rJX7We3mfT8WZzWxkaeDqzcnHV7Wu1pbr6klFFFfbH5wdnUN4oa1lBGRtPWiivoJ/Cz5+HxI5EUtFFfPn0AUUUUAf/9k=",W={class:"box"},y={class:"infinite-list-wrapper",style:{overflow:"auto","border-top":"1px solid #0072C1"}},K={style:{"list-style-type":"none"}},M=["onClick"],L=n("span",{style:{"margin-left":"400px","font-size":"16px",color:"rgba(51,33,210,0.42)"}},"欢迎进入聊天室",-1),b={style:{float:"right","font-size":"14px"}},J={class:"chat"},N={key:0,class:"right cams"},O=n("img",{alt:"",class:"headIcon radius",src:I},null,-1),S={class:"name"},H={class:"title"},X={class:"content"},Z={key:0,class:"left cams"},P=n("img",{alt:"",class:"headIcon radius",src:V},null,-1),j={class:"name"},G={class:"title"},T={class:"content"};function z(f,A,B,s,i,u){const l=Q("el-aside"),U=Q("el-header"),d=Q("el-main"),F=Q("el-input"),h=Q("el-container");return o(),a("div",W,[c(h,{style:{height:"800px",border:"1px solid #eee"}},{default:E(()=>[c(l,{style:{"background-color":"rgb(238, 241, 246)"},width:"200px"},{default:E(()=>[n("h1",null,"在线人数："+r(s.number),1),n("div",y,[(o(!0),a(m,null,g(s.userList,e=>(o(),a("div",K,[n("span",{style:{cursor:"pointer","font-size":"16px",margin:"auto"},onClick:t=>s.userCopyChat(e)},r(e),9,M)]))),256))])]),_:1}),c(h,null,{default:E(()=>[c(U,null,{default:E(()=>[L,n("span",b,"当前用户："+r(s.username),1)]),_:1}),c(d,{id:"scrollText"},{default:E(()=>[(o(!0),a(m,null,g(s.data,e=>(o(),a("div",J,[e.right?(o(),a("div",N,[O,n("span",S,[n("p",H,r(e.time),1)]),n("span",X,r(e.right),1)])):D("",!0),(o(!0),a(m,null,g(e.left,t=>(o(),a("div",null,[t.content?(o(),a("div",Z,[P,n("span",j,[n("p",G,r(t.user)+"-"+r(t.time),1)]),n("span",T,r(t.content),1)])):D("",!0)]))),256))]))),256))]),_:1}),c(F,{modelValue:s.send,"onUpdate:modelValue":A[0]||(A[0]=e=>s.send=e),rows:2,placeholder:"请输入内容",type:"textarea",onKeydown:R(s.handleSendClick,["enter"])},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})])}const Y=x(C,[["render",z]]);export{Y as default};
